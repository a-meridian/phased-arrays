a:focus-visible,
button:focus-visible,
[role="button"]:focus-visible,
[tabindex]:focus-visible {
  outline: 2px solid var(--focus-ring);
  outline-offset: 2px;
  border-radius: var(--radius-sm);
  box-shadow: 0 0 0 4px rgba(142, 208, 240, 0.26);
}

.visually-hidden {
  position: absolute !important;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0 0 0 0);
  white-space: nowrap;
  border: 0;
}

body.no-scroll {
  overflow: hidden;
}

body.figure-lightbox-open {
  overflow: hidden;
}

.reveal[data-reveal="pending"] {
  opacity: 0;
  transform: translateY(var(--reveal-distance-local, var(--reveal-distance)));
  transition: opacity var(--reveal-duration-local, var(--reveal-duration)) var(--easing-standard),
    transform var(--reveal-duration-local, var(--reveal-duration)) var(--easing-standard);
  transition-delay: calc(var(--reveal-order, 0) * var(--reveal-stagger));
}

.reveal[data-reveal-speed="fast"] {
  --reveal-duration-local: var(--reveal-duration-fast);
  --reveal-distance-local: calc(var(--reveal-distance) * 0.75);
}

.reveal[data-reveal-speed="slow"] {
  --reveal-duration-local: var(--reveal-duration-slow);
  --reveal-distance-local: calc(var(--reveal-distance) * 1.2);
}

.reveal.is-visible {
  opacity: 1;
  transform: translateY(0);
}

@media (prefers-reduced-motion: reduce) {
  .reveal,
  .reveal[data-reveal="pending"],
  .reveal.is-visible {
    opacity: 1 !important;
    transform: none !important;
    transition: none !important;
  }

  *,
  *::before,
  *::after {
    animation-duration: 0.001ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.001ms !important;
    scroll-behavior: auto !important;
  }
}

@media (prefers-contrast: more) {
  :root {
    --surface-border: rgba(195, 220, 255, 0.62);
    --text-main: #e7efff;
    --text-muted: #cdd8f1;
  }
}

/* LessWrong-style light theme override */
:root {
  color-scheme: light;

  --color-bg-0: #f9fbff;
  --color-bg-1: #f4f7fc;
  --color-bg-2: #eef3fa;
  --surface-0: rgba(255, 255, 255, 0.9);
  --surface-1: rgba(250, 252, 255, 0.95);
  --surface-2: rgba(243, 247, 253, 0.98);
  --surface-3: rgba(255, 255, 255, 0.98);
  --surface-border: rgba(145, 162, 193, 0.34);
  --surface-border-strong: rgba(104, 129, 176, 0.48);

  --text-strong: #1f2a3b;
  --text-main: #293548;
  --text-muted: #46556d;
  --text-subtle: #5d6b82;

  --accent-1: #3f69b3;
  --accent-2: #3e7dca;
  --accent-3: #8f6b39;
  --accent-4: #3f8c72;
  --accent-archive: #7f6340;
  --accent-relay: #4b73b8;
  --accent-signal-alert: #9d6a35;

  --link: #2f5fbe;
  --link-hover: #1f4da7;
  --focus-ring: #2f69c6;

  --figure-surface: linear-gradient(180deg, #ffffff, #f6f9fe);
  --figure-frame: rgba(122, 145, 185, 0.4);
  --figure-image-frame: rgba(130, 154, 196, 0.36);
  --figure-modal-bg: rgba(244, 247, 252, 0.92);
  --figure-modal-border: rgba(120, 146, 190, 0.38);
  --figure-modal-shadow: 0 16px 34px rgba(70, 91, 126, 0.22), inset 0 1px 0 rgba(255, 255, 255, 0.9);

  --progress-track: rgba(143, 160, 189, 0.26);
  --progress-fill: linear-gradient(90deg, #5884ce, #4f6fb1 55%, #8d6b3d);

  --shadow-soft: 0 14px 34px rgba(72, 93, 132, 0.17);
  --shadow-card: 0 10px 22px rgba(76, 96, 132, 0.16), inset 0 1px 0 rgba(255, 255, 255, 0.84);
  --shadow-glow: 0 0 0 1px rgba(94, 126, 186, 0.2), 0 0 14px rgba(116, 145, 195, 0.18);

  --font-display: "Space Grotesk", "Geist", "Avenir Next", "Segoe UI", Helvetica, Arial, sans-serif;
  --font-body: "Geist", "Space Grotesk", "Avenir Next", "Segoe UI", Helvetica, Arial, sans-serif;

  --fs-0: clamp(0.82rem, 0.81rem + 0.08vw, 0.9rem);
  --fs-1: clamp(0.98rem, 0.95rem + 0.26vw, 1.12rem);
  --fs-2: clamp(1.1rem, 1.02rem + 0.42vw, 1.34rem);
  --fs-3: clamp(1.36rem, 1.16rem + 0.66vw, 1.72rem);
  --fs-hero-subtitle: clamp(0.74rem, 0.72rem + 0.14vw, 0.82rem);
  --article-max: 88ch;
  --reading-measure: clamp(52ch, 70vw, 82ch);
}

body {
  font-size: var(--fs-0);
  line-height: 1.66;
  color: var(--text-main);
  background:
    radial-gradient(circle at 14% 4%, rgba(89, 122, 185, 0.07), transparent 28%),
    radial-gradient(circle at 88% 8%, rgba(155, 119, 78, 0.05), transparent 34%),
    repeating-linear-gradient(158deg, rgba(150, 169, 202, 0.05) 0 1px, transparent 1px 22px),
    linear-gradient(180deg, var(--color-bg-0), var(--color-bg-1) 46%, var(--color-bg-2));
}

body::before,
body::after {
  filter: blur(62px);
  opacity: 0.28;
}

body::before {
  background:
    radial-gradient(circle at 35% 40%, rgba(103, 135, 196, 0.28), transparent 66%),
    repeating-linear-gradient(128deg, rgba(155, 175, 212, 0.08) 0 1px, transparent 1px 15px);
}

body::after {
  background:
    radial-gradient(circle at 45% 52%, rgba(174, 140, 102, 0.22), transparent 63%),
    repeating-linear-gradient(42deg, rgba(143, 163, 197, 0.08) 0 1px, transparent 1px 13px);
}

::selection {
  background: rgba(85, 125, 200, 0.2);
  color: #13213a;
}

strong,
b {
  color: #1a2435;
}

em,
i {
  color: #3f4d64;
}

blockquote {
  border-left-color: rgba(95, 125, 183, 0.7);
  background: rgba(237, 243, 251, 0.88);
  color: var(--text-muted);
}

code {
  background: rgba(235, 241, 250, 0.92);
  border-color: rgba(140, 166, 206, 0.35);
}

pre {
  border-color: rgba(138, 160, 199, 0.4);
  background: rgba(247, 250, 255, 0.96);
  box-shadow: var(--shadow-card);
}

table,
table.longtable {
  background: rgba(255, 255, 255, 0.84);
}

th,
table.longtable th {
  background: linear-gradient(180deg, #f2f6fd, #e8effa);
  color: #1f2d40;
}

tr:nth-child(even),
table.longtable tr:nth-child(even) {
  background: rgba(243, 247, 253, 0.86);
}

table.longtable tr:nth-child(odd) {
  background: rgba(255, 255, 255, 0.92);
}

table.longtable tr:hover {
  background: rgba(228, 237, 251, 0.84);
}

.top-bar {
  background: rgba(246, 250, 255, 0.88);
  border-bottom-color: rgba(151, 170, 202, 0.38);
}

.hamburger {
  background: rgba(231, 239, 251, 0.9);
  border-color: rgba(145, 165, 198, 0.44);
  color: #244066;
}

.hamburger:hover {
  background: rgba(220, 232, 248, 0.96);
}

.top-bar-title {
  color: #1f2b3e;
  font-size: 0.92rem;
}

.sidebar {
  background: rgba(247, 250, 255, 0.92);
  border-right-color: rgba(149, 168, 199, 0.36);
}

.sidebar-header {
  border-bottom-color: rgba(149, 168, 199, 0.36);
}

.sidebar-header a {
  color: #263449;
}

.sidebar-section h3 {
  color: #4f617d;
}

.sidebar-section a {
  color: #2e3d52;
  font-size: 0.79rem;
  line-height: 1.34;
}

.content article {
  max-width: min(100%, var(--article-max));
}

.content article p,
.content article li,
.content article dd {
  max-width: min(100%, var(--reading-measure));
  overflow-wrap: break-word;
  word-break: normal;
}

.content article p {
  font-size: 0.93em;
  line-height: 1.62;
  letter-spacing: 0.002em;
}

.sidebar-section a:hover {
  color: #1f2f45;
  border-color: rgba(132, 157, 198, 0.45);
  background: rgba(224, 234, 248, 0.75);
}

.sidebar-section a.active {
  color: #1a2b44;
  background: rgba(208, 223, 246, 0.75);
  border-color: rgba(100, 131, 183, 0.62);
}

.hero {
  border-color: rgba(142, 160, 191, 0.42);
  width: min(62rem, 100% - 1.5rem);
  padding: clamp(1.3rem, 3.2vw, 2rem) clamp(1.05rem, 2.2vw, 1.5rem);
  background:
    linear-gradient(120deg, rgba(217, 229, 246, 0.58), transparent 34%),
    linear-gradient(180deg, rgba(254, 255, 255, 0.96), rgba(243, 248, 255, 0.96));
}

.hero::before {
  background:
    radial-gradient(ellipse at top, rgba(103, 138, 196, 0.12), transparent 70%),
    repeating-linear-gradient(to right, rgba(144, 165, 202, 0.12) 0 1px, transparent 1px 54px);
}

.hero::after {
  border-color: rgba(146, 168, 198, 0.34);
}

.hero h1,
.hero .subtitle,
.hero .author-bio,
.hero .description {
  color: #26344a;
}

.hero .subtitle {
  color: #4b5f7e;
}

.hero h1::after {
  border-bottom-color: rgba(120, 146, 184, 0.72);
}

.hero h1 {
  max-width: 14ch;
  letter-spacing: 0.035em;
}

.hero .author-bio,
.hero .description {
  max-width: 60ch;
}

.download-btn,
.top-bar-pdf {
  color: #13243d !important;
  border-color: rgba(93, 121, 169, 0.74);
  background:
    linear-gradient(145deg, rgba(221, 233, 252, 0.98), rgba(197, 214, 243, 0.98)),
    #dbe9fd;
  box-shadow: 0 7px 16px rgba(96, 120, 160, 0.22), inset 0 1px 0 rgba(255, 255, 255, 0.92);
}

.download-btn:hover,
.top-bar-pdf:hover {
  color: #0f1f36 !important;
  background:
    linear-gradient(145deg, rgba(207, 224, 250, 0.98), rgba(181, 203, 236, 0.98)),
    #d2e2fa;
  border-color: rgba(72, 102, 154, 0.86);
}

.toc {
  background: rgba(255, 255, 255, 0.86);
  border-color: rgba(143, 164, 199, 0.4);
}

.toc h2 {
  color: #1f2e45;
  border-bottom-color: rgba(151, 170, 201, 0.4);
}

.toc-part {
  background: linear-gradient(160deg, rgba(247, 250, 255, 0.98), rgba(235, 242, 252, 0.96));
  border-color: rgb(var(--part-accent-rgb) / 0.42);
}

.toc-part:hover {
  background: linear-gradient(160deg, rgba(237, 245, 255, 0.98), rgba(226, 236, 251, 0.96));
}

.toc-part a {
  color: #2d3e57;
}

.landing-discovery,
.landing-reference {
  background:
    linear-gradient(145deg, rgba(217, 231, 251, 0.52), transparent 38%),
    rgba(255, 255, 255, 0.9);
  border-color: rgba(143, 164, 199, 0.4);
}

.landing-section-intro {
  color: #50627f;
}

.hub-card {
  background: linear-gradient(155deg, rgba(244, 249, 255, 0.98), rgba(231, 241, 254, 0.95));
  border-color: rgba(138, 162, 199, 0.42);
}

.hub-card:hover {
  background: linear-gradient(155deg, rgba(236, 245, 255, 0.99), rgba(224, 237, 253, 0.97));
  border-color: rgba(104, 134, 181, 0.58);
}

.hub-card h3 {
  color: #1f2e45;
}

.hub-card p {
  color: #3b4f6d;
}

.reference-list a {
  color: #335381;
}

.reference-list a:hover {
  color: #223a5f;
}

.discovery-breadcrumbs ol {
  color: #5a6e8b;
}

.discovery-breadcrumbs li + li::before {
  color: rgba(112, 137, 173, 0.8);
}

.discovery-breadcrumbs a {
  color: #365783;
}

.discovery-article {
  border-color: rgba(143, 164, 199, 0.4);
  background:
    linear-gradient(152deg, rgba(220, 233, 252, 0.45), transparent 30%),
    rgba(255, 255, 255, 0.9);
}

.discovery-article h1,
.discovery-article h2,
.discovery-article h3 {
  color: #24354f;
}

.discovery-article p,
.discovery-article li {
  color: #2f425f;
}

.discovery-article a {
  color: #2f4f7b;
}

.discovery-article a:hover {
  color: #1f385c;
}

.integrity {
  border-color: rgba(143, 164, 199, 0.4);
  background:
    linear-gradient(135deg, rgba(183, 156, 110, 0.11), transparent 36%),
    rgba(250, 252, 255, 0.96);
  box-shadow: var(--shadow-card);
}

.integrity::before {
  color: rgba(126, 100, 63, 0.7);
}

.hash-display {
  border-color: rgba(140, 161, 198, 0.42);
  background: linear-gradient(150deg, rgba(247, 250, 255, 0.98), rgba(236, 243, 252, 0.98));
}

.sha256 {
  border-color: rgba(132, 157, 196, 0.38);
  background: rgba(238, 245, 255, 0.98);
  color: #2b466f;
}

.hash-hint {
  color: #5c6f8a;
}

.sealed-proof {
  border-top-color: rgba(145, 164, 199, 0.4);
}

.landing-footer {
  border-top-color: rgba(146, 165, 198, 0.36);
  color: #5c6f8a;
}

.sectionHead,
.likesectionHead,
.subsectionHead,
.likesubsectionHead,
.subsubsectionHead,
.likesubsubsectionHead,
.paragraphHead {
  color: #24354f !important;
}

.sectionHead,
.likesectionHead {
  border-bottom-color: rgba(140, 161, 199, 0.46) !important;
}

.sectionHead::before,
.likesectionHead::before {
  border-bottom-color: rgba(128, 151, 187, 0.74) !important;
}

.subsectionHead::before,
.likesubsectionHead::before {
  background: linear-gradient(to bottom, rgba(123, 146, 183, 0.75), rgba(132, 165, 206, 0.46)) !important;
}

.key-findings {
  border-color: rgba(137, 159, 196, 0.42) !important;
  border-left-color: rgba(126, 149, 188, 0.82) !important;
  background: linear-gradient(145deg, rgba(250, 252, 255, 0.98), rgba(237, 244, 253, 0.96)) !important;
  color: #2b3f5d !important;
}

.key-findings + ul.itemize1 {
  border-color: rgba(137, 159, 196, 0.35) !important;
  background: rgba(248, 251, 255, 0.92) !important;
}

.evidence-legend {
  color: #50627f;
}

.evidence-pill {
  color: #22324a;
  background: rgba(225, 235, 250, 0.92);
  border-color: rgba(128, 151, 188, 0.46);
}

.evidence-pill--l1 {
  color: #1f4b39;
  background: rgba(208, 241, 228, 0.92);
  border-color: rgba(104, 173, 145, 0.62);
}

.evidence-pill--l2 {
  color: #264773;
  background: rgba(213, 229, 252, 0.92);
  border-color: rgba(119, 151, 209, 0.62);
}

.evidence-pill--l3 {
  color: #6a4720;
  background: rgba(247, 232, 208, 0.93);
  border-color: rgba(199, 152, 92, 0.65);
}

.evidence-pill--range {
  color: #4d406d;
  background: rgba(230, 225, 247, 0.93);
  border-color: rgba(157, 145, 199, 0.6);
}

.centerline {
  color: #6b7c94;
}

.chapter-nav a {
  color: #24364f;
  border-color: rgba(130, 154, 194, 0.45);
  background: linear-gradient(150deg, rgba(248, 251, 255, 0.97), rgba(233, 241, 252, 0.95));
}

.chapter-nav a::before {
  color: rgba(101, 118, 149, 0.78);
}

.chapter-nav a:hover {
  background: linear-gradient(150deg, rgba(237, 245, 255, 0.98), rgba(222, 234, 250, 0.96));
  border-color: rgba(112, 139, 185, 0.68);
}

figure.figure {
  border-color: rgba(130, 154, 193, 0.44);
  border-top-color: rgba(125, 149, 189, 0.54);
  background:
    linear-gradient(120deg, rgba(210, 226, 249, 0.32), transparent 34%),
    var(--figure-surface);
}

figure.figure::before {
  color: rgba(96, 114, 145, 0.72);
}

figure.figure > p.noindent {
  border-color: rgba(132, 156, 194, 0.36);
  background: rgba(247, 251, 255, 0.98);
}

figure.figure img,
.float img,
figure img {
  border-color: rgba(130, 154, 194, 0.45);
  box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.74), 0 8px 20px rgba(84, 103, 137, 0.2);
  background: #fff;
}

figure.figure figcaption,
figcaption.caption,
.caption {
  border-top-color: rgba(140, 161, 197, 0.34);
  color: #485a75;
}

.figure-lightbox__surface {
  background: linear-gradient(155deg, rgba(251, 253, 255, 0.98), rgba(239, 245, 252, 0.98));
}

.figure-lightbox__toolbar {
  border-bottom-color: rgba(140, 161, 196, 0.34);
  background: rgba(241, 247, 255, 0.94);
}

.figure-lightbox__btn {
  border-color: rgba(131, 155, 194, 0.4);
  background: rgba(233, 241, 252, 0.95);
  color: #2b3e59;
}

.figure-lightbox__btn:hover {
  background: rgba(222, 233, 250, 0.98);
  border-color: rgba(108, 135, 179, 0.66);
  color: #1f3047;
}

.figure-lightbox__image {
  border-color: rgba(130, 154, 194, 0.42);
  box-shadow: 0 14px 24px rgba(76, 97, 134, 0.2);
}
